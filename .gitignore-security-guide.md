# .gitignore Security Guide

This document explains what private/sensitive information is protected from being committed to the git repository.

## âœ… Currently Protected

### ğŸ” Critical Secrets & Credentials
- **Environment files**: `.env`, `.env.*` (all variants)
- **API keys & tokens**: `*.pem`, `*.key`, `*.crt`, `*.cert`
- **Authentication files**: `credentials.json`, `secrets.json`, `auth.json`
- **SSH keys**: `id_rsa*`
- **Service account keys**: `service-account*.json`

### ğŸ’¾ Database & Backups
- **Database files**: `*.sql`, `*.sqlite`, `*.db`, `*.dump`
- **Backup files**: `*.backup`, `*.bak`
- **SQLite databases**: `/database/*.sqlite*`, `/storage/database.sqlite`

### ğŸ“ Logs (may contain sensitive data)
- **All log files**: `*.log`, `/storage/logs/*`, `/logs`
- **Debug logs**: `npm-debug.log*`, `yarn-error.log*`
- Logs can contain API keys, passwords, tokens, and PII

### ğŸ”’ Sessions & Tokens
- **Session storage**: `/storage/framework/sessions/*`
- **Token files**: `*.session`, `.token`

### ğŸ³ Docker Secrets
- **Override files**: `docker-compose.override.yml`
- These often contain local credentials

## âš ï¸ Best Practices

### Before Committing
1. **Never commit**:
   - Production database credentials
   - API keys or secrets
   - AWS access keys
   - JWT secrets
   - Cloudonix API keys
   - Database connection strings with passwords

2. **Always use**:
   - Environment variables for secrets
   - `.env.example` with placeholder values
   - Secret management services for production

### Environment Files
- âœ… **Commit**: `.env.example` (with dummy values)
- âŒ **Never commit**: `.env`, `.env.local`, `.env.production`

### Example `.env.example`
```env
APP_KEY=base64:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
DB_PASSWORD=your_secure_password_here
CLOUDONIX_API_TOKEN=your_cloudonix_token_here
CLOUDONIX_DOMAIN_UUID=your_domain_uuid_here
```

## ğŸš¨ If You Accidentally Commit Secrets

1. **DO NOT** just delete the file and commit again (it's still in history)
2. **Immediately rotate** any exposed credentials
3. **Remove from git history**:
   ```bash
   git filter-branch --force --index-filter \
     "git rm --cached --ignore-unmatch path/to/sensitive/file" \
     --prune-empty --tag-name-filter cat -- --all
   ```
4. **Force push** (coordinate with team first):
   ```bash
   git push origin --force --all
   ```

## ğŸ“‹ Regular Security Checks

Run this command to check for accidentally tracked sensitive files:

```bash
git ls-files | grep -E '\.(env|pem|key|crt|cert|secret|sql|dump|db|sqlite)$|credentials\.json|secrets\.json'
```

If this returns any files, they should be immediately removed from git tracking.

## ğŸ” Verify Before Pushing

Before pushing to remote:
```bash
# Check what will be committed
git status

# Review changes
git diff --cached

# Check for sensitive patterns
git diff --cached | grep -i "password\|secret\|key\|token"
```

## ğŸ“ Questions?

If you're unsure whether something should be committed, **err on the side of caution** and add it to `.gitignore`.
